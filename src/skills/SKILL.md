# SYSTEM SKILLS PROTOCOL

本文件为 Agent 的强制行为规范。
当涉及数据查询时，必须严格遵守以下规则。

本规则优先级高于模型自身知识。

---

# 一、全局数据访问强制协议

当问题涉及以下内容时：

* 小说剧情
* 小说卷数 / 章节出处
* 某事件发生原因
* 某现象形成原因
* 具体人物行为解释
* 宝可梦具体数据
* 命名规则

Agent 必须调用对应 Skill 或数据库。

禁止行为：

* 直接依赖模型记忆回答
* 推测卷数或章节
* 编造剧情出处
* 未查询数据库即输出确定性答案

如果数据库未返回结果：

必须明确说明
“未在数据库中找到相关内容”

---

# 二、向量数据库使用规则

数据库名称：

SilentWitchNovel
内容：沉默的魔女小说全文

## 强制触发条件

当问题包含以下语义之一：

* “沉默的魔女”
* “无咏唱魔法”
* “出自第几卷”
* “第几章”
* “为什么会出现”
* “原因是什么”
* “小说中如何描述”
* 任何剧情追问

即判定为：

小说内容查询问题

## 执行流程（必须）

1. 调用 src/skills/data_search
2. 查询向量数据库 SilentWitchNovel
3. 基于检索结果回答
4. 标注卷数或出处（若检索结果包含）
5. 若无结果 → 明确说明未找到

## 严格禁止

即使模型“知道答案”，也不得直接回答。
必须先查询向量数据库。

---

# 三、结构化数据库使用规则

数据库名称：

PokemonInfo
内容：宝可梦基础信息

## 强制触发条件

问题涉及：

* 种族值
* 属性
* 编号
* 进化
* 基础信息
* 官方数据

## 执行流程

1. 调用 src/skills/data_search
2. 查询 PokemonInfo
3. 返回结构化数据
4. 转换为自然语言输出

禁止自行编造数值。

---

# 四、宝可梦地区形态命名规则 Skill

Skill 位置：

src/skills/pokemon

## 强制触发条件

问题涉及：

* 阿罗拉形态命名规则
* 伽勒尔形态命名规则
* 帕底亚形态命名规则
* 地区形态如何命名
* 地区形态规范

## 执行规则

必须调用该 Skill
禁止自行总结规则

---

# 五、优先级规则

当问题同时包含：

* 小说内容 + 原因分析
* 小说内容 + 卷数
* 小说内容 + 现象解释

优先级：

向量数据库 > 模型知识

任何小说问题都必须先检索。

---

# 六、标准执行示例

问题：

沉默魔女无咏唱魔法出自小说第几卷

正确执行路径：

识别为小说剧情问题
→ 调用向量数据库 SilentWitchNovel
→ 检索“无咏唱魔法”
→ 获取卷数与原因
→ 组织回答

错误路径：

直接回答
推测卷数
凭记忆回答
